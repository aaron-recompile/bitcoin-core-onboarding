# 《Onboarding to Bitcoin Core》忠实中译  
Author: Amiti Uttarwar  
Translator: Aaron Zhang  

> 原文链接：  
> https://medium.com/@amitiu/onboarding-to-bitcoin-core-7c1a83b20365  
> 本译文仅用于学习与研究，版权归原作者所有。

---

## Onboarding to Bitcoin Core

在过去的一年里，我掉进了一个非常美妙的“兔子洞”：为 Bitcoin Core 做贡献。一路走来，我非常幸运地得到了很多人的指引和支持，也自己摸索出了一些小窍门。在这篇文章里，我想把这些我觉得有效的工具整理出来，与大家分享。

为 Bitcoin Core 做贡献，只是推动这个协议向前发展的方式之一。其他方式还包括（而且远远不止于此）：参与邮件列表中的讨论、研究攻击向量或扩容技术、为某个 Lightning 客户端做贡献 [1] [2] [3] [4]，或者开发相关工具，比如 secp256k1 库，或者更好的测试基础设施。不过，这篇文章不会讨论这些主题。

这篇文章谈的，是 Bitcoin Core——从我自己 onboarding 的经历这个视角出发。我希望它能帮你找到属于你自己的贡献路径。

---

## Before you start / 在你开始之前

首先，去读白皮书。真的。如果你还没读过，现在就先别看这篇文章，立刻去读白皮书。

想要向 Bitcoin Core 提交有意义的 PR（包括大多数比较小的 PR），理解 Bitcoin 运作方式背后的概念基础是必要条件。接触这些基础的方式有很多。我会建议先从几本书中的一本开始读（《Mastering Bitcoin》《Programming Bitcoin》或者《Grokking Bitcoin》）。如果是在网上找资料，我会推荐去看 Jameson Lopp 的资源列表，或者 Chaincode Labs 的课程。前者覆盖面更广，后者则是专门面向协议开发设计的。

如果你的目标是为 Bitcoin Core 做贡献，不要在“想把每个概念的细节都弄懂”这件事上卡住。很多主题都有无限多的细枝末节。我们的目标是：对系统建立一个高层次的理解，并且接触到系统的不同部分。要把这个分布式共识系统的基本原理内化，需要时间。

Bitcoin Optech 的每周简报是学习生态系统中技术进展的**最佳方式**。Dave Harding 是个文字魔法师，他写得非常清晰，让你很容易保持跟进。我强烈建议订阅。

---

## Choose what to tune out / 学会筛掉什么

当你决定要为 Bitcoin Core 做贡献之后，上面那个过程并不会停下来。这个项目内部有足够多的复杂性和开发工作，可以让任何人忙上好几辈子。为了选择要把注意力花在哪里，先搞清楚有哪些东西是你**暂时不打算关心的**，会很有帮助。

要做出改动，“广度”和“深度”都很重要。找到合适的平衡，是一门会随着时间慢慢发展的艺术。广度可以增加你接触新概念的机会，帮你识别哪些工作是与你相关的。要提出一个真正改善代码库的 PR，理解大局层面的背景和在某一局部深入钻研、熟悉你要修改的 changeset，这两者同样关键。

想帮你的人，往往很喜欢再多推荐一些你“应该读 / 应该学 / 应该理解 / 应该消化”的东西……我自己在上面已经这样做了——我推荐了 3 本书、2 个几乎无穷无尽的资料列表，还有 1 份周刊，而且这些都出现在“开始之前”这一节！另外，当你和别人交流时，也会有一种隐性的压力：好像你需要对大量话题都很了解，才能参与每一场讨论。这对拓展广度很有帮助，但真正推动你去追求深度的那条路径，只能由你自己来创造。要做出一个 PR，你需要在某个具体方向上发展出足够专门的知识（哪怕接触面很小），这样你才能提出一个具体的改动。不要卡在“只是一味地摄入信息”这一阶段，专注力会帮助你从“只消费”走向“开始创造”。

如果你不是整天都在干 Bitcoin，这一点就更重要了。这个项目极其复杂。要主动为自己“腾出空间”。就连看起来非常简单的任务，也可能需要花不少时间。

好了，人生建议先说到这里。下面回到项目本身的一些具体内容……

---

## Get familiar with the codebase / 熟悉代码库

- 把仓库克隆下来，编译，然后跑一遍测试。
- 把项目里的开发文档看一遍：
  - 《Contributing to Bitcoin Core》：这是入门必须掌握的内容，介绍了 PR 的理念以及 review 流程是如何运作的。
  - 《Developer Notes》：第一次可以粗略浏览一遍，在你准备开 PR 之前，再回头仔细阅读，确保自己遵守当前的规范。
  - 《Productivity Notes》：其中的很多技巧在开发工作流的不同阶段都**非常有用**。我强烈建议一开始就做前四条（安装 ccache；善用 ./configure；使用 `make -j [num-cores]`；并且指定构建目标）。
- 阅读 Jimmy Song 和 John Newbery 写的 onboarding 博文。
- 参加每周的 PR review club。Review PR 对这个项目至关重要。更重要的是，当你刚刚起步时，通过 review PR 是了解代码库和合并流程的有效方式。Review club 可以让你在其他人的支持下，熟悉某一个具体的 changeset。你能从 review club 中获得多少价值，完全取决于你愿意投入多少精力。每周的 meeting notes 会帮你意识到一些模式，比如技术架构和历史背景，而如果只靠自己摸索，这些东西往往需要花很长时间才能建立起来。无论你只是旁听会议、在会前自己在代码里到处乱逛，还是提前做了大量准备并积极参与讨论，你都一定会学到很多。提前做准备，会让你在会议期间更好地提问题，或者更有信心确认自己对代码的理解。

---

## Find your first PR / 找到你的第一个 PR

当你开始逐渐适应代码库时，你可能会觉得自己已经准备好要提交 PR 了，但又不确定怎样选择一个对项目真正有价值的贡献。很有可能，前面提到的那些路径已经足以让你接触到某个“有意义的小领域”，那里正有一些任务等着被人接手。但如果你还在寻找，这里有一些额外的选项：

- 关注 `good first issue` 和 `up for grabs` 这两个标签。看 `up-for-grabs` 的时候，记得把 “open + closed” 都勾上。
- 在代码库里 grep “TODO” 这个字符串，逐条看一看，看看其中有没有和你目前对代码库的熟悉程度相匹配的任务。我在测试代码里就碰到过一些看起来很适合初学者的 TODO。
- 选定代码库的某一部分（也就是贡献文档里提到的某个模块），关注跟它相关的 PR。只要你跟着这些 PR 的对话走，你**一定**会注意到一些后续的待办事项（follow-up TODO）。同时，多思考一下如何测试这些改动。专门去处理这些后续任务、或者提升测试覆盖率的 PR 会非常受欢迎。你也可以通过回顾与这个模块相关的 PR review club 记录，来熟悉这一部分代码。

开源贡献的本质在于：不会有一个集中式的项目管理系统。  
这也就意味着：有一些 changeset 对项目来说确实有用，但未必是 PR 作者在当时投入精力和技能的最理想选择。  
因此，作为贡献者 onboarding 过程的一部分，就是要找到那些“虽然细分、但有用”，而且**刚好处在你的学习曲线附近**的贡献点。  

我自己的第一个 PR，就是沿着这样一个 up-for-grabs PR 一路做下来的。

让我非常惊讶的是：其实有这么多“伸手可摘的果子”可以去贡献。如果不是自己认真看了一圈 GitHub 项目，我绝不会想到这是这样的状况。

以 Bitcoin Core 这个项目在外界的“江湖地位”和带来的压迫感来说，贡献居然是如此“可达”，这真是令人难以置信。看到那一长串永远做不完的 todos（既有简单的，也有复杂的），也让我更真切地意识到：Bitcoin 这个项目其实依然很年轻，而且非常明显地需要更多贡献者。

---

## Embrace the internet to further your learning / 拥抱互联网，推进你的学习

当我开始学 C++ 的时候，我买了几本很不错的书，但说实话，我到现在也还没把它们完全读完。

对我来说，最有效的方式是“动手实践”。我会集中精力去学那些**能让我看懂 Bitcoin Core 代码库**的语言部分。

所以，我会写代码。当我遇到某个新的 C++ 概念时，我会去读文档，然后在一个小的示例程序里把这个功能单独拿出来做实验。我一直在 tmux 里开着一个叫做 `c++ play` 的标签页。那些小程序既是实验代码，也成了我玩过的各种概念的“文档”。

另一个非常棒的工具是 Compiler Explorer。我特别喜欢它的彩色高亮——可以把多种实现同一功能的写法放在一起，看看这些差异只是表面语法不同、会不会被优化掉，还是说真的在底层干了不一样的活儿。

如果想更深入理解某个具体的 C++ 概念，我很喜欢看 CppCon 的演讲，尤其是其中的 “Back to Basics” 系列。

这些都是很好的起点，但有时候我还是想和“真人”聊一聊。刚开始的时候，我会碰到一些连怎么 Google 都不知道的问题，比如：后来我才学到，原来一处精心放置的冒号 `:` 表示的是一个 initializer list。现在，我更多是想确认：自己从文档和实验里得到的理解是不是正确。

---

## Become a member / 成为社区的一员

我发现了一些非常棒的线上社区，有很多陌生人愿意帮我指出正确的方向。  
对 C++ 来说，有：

- `cpplang` Slack  
- `##C++-general` IRC 频道  
- `#include<C++>` 社区的 Discord 服务器  

这些线上陌生人的热心程度，让我非常惊喜。  
我也会去 `#git` IRC 频道问一些跟 git 相关的具体问题。

有两点小提示：

1. 我鼓励大家去求助，但请在提问方式上保持尊重与体贴。先自己做足功课，尽量先自己找到答案。对别人的帮助要心怀感激，并且在合适的沟通渠道里提问。别人没有义务帮你解答问题，任何伸出的援手都来自对你的慷慨。  
2. 关于 IRC 客户端的选择：我发现 irccloud 是个简单、界面好看、而且不太需要你折腾配置的客户端。付一小笔钱的话，你可以拥有一个持久用户名和聊天记录。客户端有很多选项，但我建议你把决策精力留给“真正重要的决策”，IRC 客户端就随便挑一个顺眼的就好。

---

## Some Bitcoin resources I like / 我喜欢的一些 Bitcoin 资源

大部分我最喜欢的 Bitcoin 资源，其实已经散落在这篇文章的各个部分了，但就“熟悉代码库”这个目的而言，这里有一些我想特别高亮出来的：

- P2P 消息和 RPC 的开发者参考文档  
- Bitcoin Stack Exchange 上关于协议开发的讨论（散落在不同问答里）。它在 Google 里的索引效果不算好，所以建议你直接进站按主题搜索。  
- Fabian Jahr 写的一份关于调试技巧的综合文档（有演讲视频，也有 gist）  
- 我很喜欢 James O’Beirne 做的架构总览（有演讲也有 slides）  

如果你正被某个技术概念困住，不知道接下来可以尝试什么，请联系我！我当然不可能拥有所有答案，但我很乐意和你一起 brainstorm，帮你找到更多可能的解决方向。

---

## More avenues for learning about Bitcoin / 学习 Bitcoin 的更多路径

有很多很棒的方式，可以帮助你更好地接触 Bitcoin 生态里的最新发展。下面这些选项，我觉得“信噪比”都很高：

- 每周四 19:00 UTC，在 `#bitcoin-core-dev` 频道有一次 IRC 会议。  
- `#bitcoin-core-pr-reviews` 频道有时会用来讨论流程和工具，多留意一下会很有帮助。  
- 回头再看一遍 Chaincode Labs 的 Bitcoin 课程。里面有非常多优秀的资料——演讲、论文，甚至还有代码挑战！  
- 参加高质量的会议。  
- 看之前会议的录像。我在通勤时听 Bitcoin Edge Dev++ 的视频（2017 和 2018 年），学到了很多。  
- 如果你住的城市有条件，去参加一场 Socratic seminar（苏格拉底式研讨会）。  
- 阅读 Bitcoin Wiki，尤其是 protocol 和 privacy 这两个页面。  
- Chaincode 最近还启动了一个专门关注协议的播客。  

想要熟悉 Bitcoin 协议并不容易，尤其是如果你还有全职工作，或者还是学生。我会用“间隔重复”的记忆卡片来记新东西，我强烈推荐这种方法。它可以帮助你更好地把信息牢牢记住，这样你就能把更多精力放在学习新概念或应用已有知识上。我用 Anki 在电脑上创建卡片，然后在手机上复习。这样一来，我就可以在路上做“概念学习”，把任何零碎时间都用在代码库里的某个具体任务上。

多留意 Chaincode 的 residency 项目。我非常感激自己去年夏天能参加这个项目，它在我 onboarding 到 Bitcoin Core 的过程中起到了“改变局面”的作用。但要记住，这是一个竞争非常激烈的项目，你在此之前为 Bitcoin Core 做的任何贡献（参加 review club、review PR、提交 PR 等）都能提高你被录取的机会。

---

## Seriously. Do It. / 真的，去做吧

为 Bitcoin Core 做贡献是很难的，但绝非不可能。在踏上这段旅程之前，我从来没写过（甚至可以说几乎没读过）任何 C++ 代码。被它吓到是很自然的，但不要让这种恐惧阻止你前进。

要对自己有耐心。我在 Bitcoin Core 上做过的每一件事，都花了“至少一个、甚至两个永恒”那么久。有一次，我在集成测试里花了整整 3 天，只为了尝试不同的办法来用交易填满一个 mempool。前几次尝试都需要非常长的测试准备时间，所以我只能不停地换方法。不要陷入那种内心独白——“这明明应该很简单”——的陷阱。把注意力放在你能学到什么上，然后继续尝试。

刚开始的时候，很容易把“Bitcoin Core”和“核心贡献者”想象成一个大而模糊、根本无法靠近的组织。但保持这样的视角会更有帮助：贡献者们其实就是一群对 Bitcoin 充满热情的个体。我在这一路上的发现非常令人惊喜——大家都非常愿意帮忙、非常支持。每个参与这个项目的人都极度“带宽有限”，所以只要你在做有意义的贡献，大家都会鼓励你。

这点很重要：**不要以修改 PR 里的拼写错误作为你的起点。**  
要有耐心，投资在自己的学习上，观察这个项目，然后识别出你能做出有意义贡献的地方。

无论你现在处于学习曲线的哪一个阶段，你都可以成为这个项目的资产。只要你愿意投入精力、具备批判性思考能力，并且持续学习，你就是资产。不要让傲慢或者不安全感把你带偏。

---

## To conclude, some whimsical ponderings… / 最后的几个小小遐想

如果我们要画出一张图，来表示所有通向 Bitcoin Core 贡献之路的学习路径，那它肯定不会像区块链那样整齐划一、线性延伸。

走你自己的路，偶尔绕个远一点的风景线，好好享受这段旅程。

---

## Off-trail backpacking metaphor / 离线徒步的比喻

在我看来，在开源世界中探索，很像是在“离线徒步”。

徒步的时候，我会先在等高线地图（topographic map，简称 topo）上查看自己想去的区域，然后在上面画出一条大致的计划路线，尽量让这条路线保持在地形最平缓的区域。比起来，Bitcoin 领域里的“地图”远不如 USGS 的那些地图——后者曾经那么好地帮助我在内华达山脉（Sierras）中穿行。因此，在 Bitcoin 里寻找路径时，你首先要用自己对各个碎片知识的理解，拼出一张粗略的地图，然后再规划一条前进路线。这篇文章的一个小小心愿，就是能让这个过程变得稍微容易一点点。

真正开始走在路上的时候，你需要不断地迭代。每迈出一步，你都会获得新的信息，并用这些信息来判断：哪一条路是阻力最小的，从而让你把精力用在深入山地探险上。你既要关注每一步脚下细节，也要关注这些步伐最终构成的宏观路线。

在 Bitcoin 里，这个过程也是类似的。随着你学到更多东西，你会看到前方新的地形视角，然后不得不不断修正自己的路线，好让自己以一种合理的方式持续前进。有时候你会走到“悬崖边”，不得不退回去，换一条路再试。找路本身就需要投入大量精力和注意力——你既是“导航员”，也是“徒步者”。

我大概还能把这篇文章的篇幅再翻一番，专门去挖掘这些类比之间的相似之处，不过我决定就到这里收尾：

**Good luck! I hope to see you on GitHub :)**

如果你有问题或建议，欢迎在 Twitter 上私信我。

感谢为本文提供意见的几位审阅者：Jonas、Carla 和 Paul。